###堆栈顺序
1. 没有z-index和position属性时，堆栈顺序和元素在html中的顺序一致。
2. 在有position属性时，定位元素（和子元素，定位指absolute、relative、fixed）在非定位元素前显示。
3. 当有z-index属性时(z-index只对定位元素起作用)，高z-index值的元素在底z-index值的元素前面。

###堆栈上下文
* 一组具有共同双亲的元素，按照堆栈顺序一起向前或向后移动构成了所谓的堆栈上下文。
* 每一个堆栈上下文都有一个HTML元素作为它的根元素。当一个新的堆栈上下文在一个元素上形成，那么这个堆栈上下文会限制所有的子元素以堆栈的顺序存储在一 个特别的地方。那意味着一旦一个元素被包含在处于底部堆栈顺序的堆栈上下文中，那么就没有办法先出现于其他处于更高的堆栈顺序的不同堆栈上下文元素，就算 z-index值是十亿也不行！
* 堆栈上下文有三种方法可以在一个元素上形成：
	- 当一个元素是文档的根元素时（<html>元素）
	- 当一个元素有一个position值而不是static，有一个z-index值而不是auto
	- 当一个元素有一个opacity值小于1
	
###在同样的堆栈上下文里的堆栈顺序
一个单独的堆栈上下文里的堆栈顺序（从后向前）：

1. 堆栈上下文的根元素
2. 定位元素（和他们的子元素）带着负数的z-index值（高的值被堆叠在低值的前面；相同值的元素按照在HTML中出现的顺序堆叠）
3. 非定位元素（按照在HTML中出现的顺序排序）
4. 定位元素（和他们的子元素）带着auto的z-index值（按照在HTML中出现的顺序排序）
5. 定位元素（和他们的子元素）带着正z-index值（高的值被堆叠在低值的前面；相同值的元素按照在HTML中出现的顺序堆叠）


所有的盒模型元素都处于三维坐标系中。 除了我们常用的横坐标和纵坐标， 盒模型元素还可以沿着“z轴”层叠摆放， 当他们相互覆盖时， z轴顺序就变得十分重要。
默认的摆放规则

假定元素没有指定z-index属性，那么元素按照如下顺序叠放（从底到顶）

    根元素的背景和边界
    普通流(无定位)里的块元素(没有position或者position:static;)按HTML中的出现顺序堆叠
    定位元素按HTML中的出现顺序堆叠

浮动

对于浮动的块元素来说，堆叠顺序变得有些不同。浮动块元素被放置于非定位块元素与定位块元素之间：

    根元素的背景与边框
    位于普通流中的后代块元素按照它们在 HTML 中出现的顺序堆叠
    浮动块元素
    常规流中的后代行内元素
    后代中的定位元素按照它们在 HTML 中出现的顺序堆叠

使用 z-index

如果需要改变默认的摆放顺序，只需给元素指定z-index。z-index必须是整数，体现了元素在z轴的位置：

    底层：距离观察者最远
    ……
    -3 层
    -2 层
    -1 层
    0 层 （默认）
    1 层
    2 层
    3 层
    ……
    顶层：最接近观察者

没有指定z-index的时候，所有元素默认在0层渲染。多个元素的z-index属性相同时，将按照上文描述的顺序布局。

使用z-index排序的例子：

注意，div#5的z-index无效，因为未指定position属性。
堆叠上下文

指定z-index属性将构造一个堆叠上下文。

以下元素构成堆叠上下文指：

    根元素html
    定位元素，且其z-index值不为auto
    opacity小于1的元素
    在移动WebKit、Chrome22+以上，指定position: fixed的元素总是会构造堆叠上下文，即使z-index为auto。

堆叠上下文中的子元素按照前述顺序摆放。堆叠上下文内部的子堆叠上下文的z-index只在父堆叠上下文中有意义。

总而言之：

    z-index不为auto，opacity小于1的元素会构建堆叠上下文。
    堆叠上下文可以嵌入其他堆叠上下文。
    每个堆叠上下文和它的同级上下文是独立的。
    每个堆叠上下文是自包含的。
    
***
---
1、CSS样式表中Z-index属性的一些特征：

Z-index属性的默认值是0
元素可拥有负的 z-index 属性值，如z-index:-1
Z-index属性无继承性
Z-index属性JavaScript 使用语法：object.style.zIndex=”1″
几乎所有主流浏览器都支持 Z-index 属性

2、CSS样式表中Z-index属性的使用方法：

.box
 {position:absolute;
left:0px;
top:0px;
z-index:-1}

3、CSS样式表中Z-index属性使用的注意事项：

（1）Z-index仅对定位元素有效（如position:relative\absolute\fixed\float）；

（2）Z-index只可比较同级元素。这也许是大家很容易忽视的问题，我就卡在了这里。也就是说，Z-index只能对同级元素进行分层展示；

（3）Z-index的作用域：假设A和B两个元素都设置了定位（相对定位、绝对定位、一个相对一个绝对定位都可以），且是同级元素（这里实际上重申了第一、二点）。样式为：

.boxA{z-index:4}

.boxB{z-index:5}

于是，不难看出，元素A的层级（z-index:4）要低于元素B（z-index:5），在此需要指出的是，A元素下面的子元素的层级也同样都低于B元素里的子元素，即使你将A元素里的子元素设为z-index:9999；同理元素B里的子元素，即使是设的z-index:1它照样比元素A的层级要高；

（4）这个属性不会作用于窗口控件，如select对象。

（5）在父元素的子元素中设置Z-index的值，可以改变子元素之间的层叠关系

（6）子元素的Z-index值不管是高于父元素还是低于父元素，只要他们的z-index值是大于等于0的数，他们都会显示在父元素之上，即压在父元素上；只要他们的值是小于0的数，则显示在父元素之下！



现在我们来说说什么情况下会产生新的层：

当一个元素位于HTML文档的最外层（<html>元素）
当一个元素被定位了并且拥有一个z-index值（不为auto）
当一个元素被设置了opacity，transforms, filters, css-regions, paged media等属性。